<!DOCTYPE html>

<html lang="zh-Hans"  dir="ltr"

>

<head>
  <title class="p-name">斜交策略 Oblique Strategies - Rongbin&#39;s Blog</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
<meta name="description"
    content="被我们落下的想象力，以什么挽留他？
Brian Eno和Peter Schmidt设计了超过一百个prompt，写在卡片上，来帮你打破寻找创意的障碍。这里有英文版本的完整列表。
这组卡片叫Oblique Strategies，有人翻译成迂回策略或间接策略。我喜欢叫它“斜交策略”。因素分析中，你会遇到“正交旋转”与“斜交旋转”，激发创造力，就像从这些卡片中寻找能联动我们潜意识的相关因素。
当创作的工作属性变强、时间压力变重时，Eno和Schmidt意识到这会让他们偏离思考和创作的本质。于是他们都写下一些要旨，帮助保持思维活跃，提醒自己不要忘记那些能从侧面推进的有趣方法，整合成了这组卡片。
1980年初，Eno在接受Charles Amirkhanian采访时说道：
The Oblique Strategies evolved from me being in a number of working situations when the panic of the situation - particularly in studios - tended to make me quickly forget that there were others ways of working and that there were tangential ways of attacking problems that were in many senses more interesting than the direct head-on approach. If you&rsquo;re in a panic, you tend to take the head-on approach because it seems to be the one that&rsquo;s going to yield the best results Of course, that often isn&rsquo;t the case - it&rsquo;s just the most obvious and - apparently - reliable method. ">
<meta name="author p-author" content="Rongbin FAN" href="https://fanrongbin.com">

<meta property="og:title" content="斜交策略 Oblique Strategies - Rongbin&#39;s Blog" />
<meta property="og:description" content="被我们落下的想象力，以什么挽留他？
Brian Eno和Peter Schmidt设计了超过一百个prompt，写在卡片上，来帮你打破寻找创意的障碍。这里有英文版本的完整列表。
这组卡片叫Oblique Strategies，有人翻译成迂回策略或间接策略。我喜欢叫它“斜交策略”。因素分析中，你会遇到“正交旋转”与“斜交旋转”，激发创造力，就像从这些卡片中寻找能联动我们潜意识的相关因素。
当创作的工作属性变强、时间压力变重时，Eno和Schmidt意识到这会让他们偏离思考和创作的本质。于是他们都写下一些要旨，帮助保持思维活跃，提醒自己不要忘记那些能从侧面推进的有趣方法，整合成了这组卡片。
1980年初，Eno在接受Charles Amirkhanian采访时说道：
The Oblique Strategies evolved from me being in a number of working situations when the panic of the situation - particularly in studios - tended to make me quickly forget that there were others ways of working and that there were tangential ways of attacking problems that were in many senses more interesting than the direct head-on approach. If you&rsquo;re in a panic, you tend to take the head-on approach because it seems to be the one that&rsquo;s going to yield the best results Of course, that often isn&rsquo;t the case - it&rsquo;s just the most obvious and - apparently - reliable method. " />
<meta property="og:url" content="https://fanrongbin.com/oblique-strategies/" />
<meta property="og:image" content="https://fanrongbin.com/apple-touch-icon.png" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://fanrongbin.com/apple-touch-icon.png" />
<meta name="twitter:title" content="斜交策略 Oblique Strategies - Rongbin&#39;s Blog" />
<meta name="twitter:description" content="被我们落下的想象力，以什么挽留他？
Brian Eno和Peter Schmidt设计了超过一百个prompt，写在卡片上，来帮你打破寻找创意的障碍。这里有英文版本的完整列表。
这组卡片叫Oblique Strategies，有人翻译成迂回策略或间接策略。我喜欢叫它“斜交策略”。因素分析中，你会遇到“正交旋转”与“斜交旋转”，激发创造力，就像从这些卡片中寻找能联动我们潜意识的相关因素。
当创作的工作属性变强、时间压力变重时，Eno和Schmidt意识到这会让他们偏离思考和创作的本质。于是他们都写下一些要旨，帮助保持思维活跃，提醒自己不要忘记那些能从侧面推进的有趣方法，整合成了这组卡片。
1980年初，Eno在接受Charles Amirkhanian采访时说道：
The Oblique Strategies evolved from me being in a number of working situations when the panic of the situation - particularly in studios - tended to make me quickly forget that there were others ways of working and that there were tangential ways of attacking problems that were in many senses more interesting than the direct head-on approach. If you&rsquo;re in a panic, you tend to take the head-on approach because it seems to be the one that&rsquo;s going to yield the best results Of course, that often isn&rsquo;t the case - it&rsquo;s just the most obvious and - apparently - reliable method. " />

<link rel="canonical" href="https://fanrongbin.com/oblique-strategies/" />






      <link rel="stylesheet" href="/css/main.min.532ab033f2f6593c840f3938f5a4ac05fdb3648279035c96e12baf62b1116c7a.css" integrity="sha256-UyqwM/L2WTyEDzk49aSsBf2zZIJ5A1yW4SuvYrERbHo=" crossorigin="anonymous">

<link rel="stylesheet" href="/han.min.css" type="text/css">





<link rel="alternate" type="application/activity+json" href="https://fed.brid.gy/r/https://fanrongbin.com/oblique-strategies/">

<link rel="webmention" href="https://webmention.io/fanrongbin.com/webmention" />

<script data-goatcounter="https://ron.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
</head>

<body class="han-init-context">

  <section class="navbar">
    <span class="header-name">
    <a href="/" class="header-link h-card p-name p-author u-url u-uid">Rongbin FAN</a>
     / <a href="/posts" class="header-link">Blog</a>
    <br>
    
    <a href="/stream" class="header-link header-guestbook">ϟ Stream</a>
    <a href="/resources" class="header-link header-guestbook">↺ Resources</a>
    <a href="/links" class="header-link header-guestbook">◩ Guestbook</a>
    
</span>


  </section>

  <article class="article-entry h-entry">
      

<section class="content-header">

  <div class="top-scroll-bar"></div>
<div class="addn visible">
<a onclick="showHypo()" style="color:var(--textcolor);text-decoration:none;border:none;"><div id="show-hypo" class="header-button no-select">Hypothes.is</div></a>
<a onclick="toggleTOC()" style="color:var(--textcolor);text-decoration:none;border:none;"><div id="contents-fixed" class="header-button no-select">Contents</div></a>
</div>
<div id="contents-toc" class="no-select">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#卡片列表">卡片列表</a></li>
  </ul>
</nav>
</div>

  

  <div id="single-header">
    <h1 class="p-name content-h1">斜交策略 Oblique Strategies</h1>
    

    
      
      
      
        
        <p class="content-time"><time class="dt-published" datetime="2023-11-22T00:00:00&#43;00:00">22 November 2023</time></p>
        
      
    

    <a rel="author" class="p-name h-card" href="https://fanrongbin.com" style="display:none;">Rongbin Fan</a>
  </div>

  

</section>





<style>
  .navbar, footer, .footer-nav, .webmentions-how, .comment-box, .comment-title {
    opacity: 0.35 !important;
  }
  .navbar:hover, footer:hover, .footer-nav:hover, .webmentions-how:hover, .comment-box:hover {
    opacity: 1 !important;
  }
</style>



<div class="link-display"></div>


      
      
      
      <main class="e-content">
      
      














    

    

    

<p>被我们落下的想象力，以什么挽留他？</p>
<p>Brian Eno和Peter Schmidt设计了超过一百个prompt，写在卡片上，来帮你打破寻找创意的障碍。这里有英文版本的<a href="https://matt-rickard.com/list-of-all-oblique-strategies">完整列表</a>。</p>
<p>这组卡片叫Oblique Strategies，有人翻译成迂回策略或间接策略。我喜欢叫它“斜交策略”。因素分析中，你会遇到“正交旋转”与“斜交旋转”，激发创造力，就像从这些卡片中寻找能联动我们潜意识的相关因素。</p>
<p>当创作的<strong>工作</strong>属性变强、时间压力变重时，Eno和Schmidt意识到这会让他们偏离思考和创作的本质。于是他们都写下一些要旨，帮助保持思维活跃，提醒自己不要忘记那些能从侧面推进的有趣方法，整合成了这组卡片。</p>
<p>1980年初，Eno在接受Charles Amirkhanian采访时说道：</p>
<blockquote>
<p>The Oblique Strategies evolved from me being in a number of working situations when the panic of the situation - particularly in studios - tended to make me quickly forget that there were others ways of working and that there were tangential ways of attacking problems that were in many senses more interesting than the direct head-on approach. If you&rsquo;re in a panic, you tend to take the head-on approach because it seems to be the one that&rsquo;s going to yield the best results Of course, that often isn&rsquo;t the case - it&rsquo;s just the most obvious and - apparently - reliable method. The function of the Oblique Strategies was, initially, to serve as a series of prompts which said, &ldquo;Don&rsquo;t forget that you could adopt <em>this</em> attitude,&rdquo; or &ldquo;Don&rsquo;t forget you could adopt <em>that</em> attitude.</p>
<p>The first Oblique Strategy said &ldquo;Honour thy error as a hidden intention.&rdquo; And, in fact, Peter&rsquo;s first Oblique Strategy - done quite independently and before either of us had become conscious that the other was doing that - was &hellip;I think it was &ldquo;Was it really a mistake?&rdquo; which was, of course, much the same kind of message. Well, I collected about fifteen or twenty of these and then I put them onto cards. At the same time, Peter had been keeping a little book of messages to himself as regards painting, and he&rsquo;d kept those in a notebook. We were both very surprised to find the other not only using a similar system but also many of the messages being absolutely overlapping, you know&hellip;there was a complete correspondence between the messages. So subsequently we decided to try to work out a way of making that available to other people, which we did; we published them as a pack of cards, and they&rsquo;re now used by quite a lot of different people, I think.</p>
</blockquote>
<p>我们也可以从这组卡片的第一个版本中，得到他们的初衷：</p>
<blockquote>
<p>These cards evolved from our separate observations on the principles underlying what we were doing. Sometimes they were recognized in retrospect (intellect catching up with intuition), sometimes they were identified as they were happening, sometimes they were formulated.</p>
<p>They can be used as a pack (a set of possibilities being continuously reviewed in the mind) or by drawing a single card from the shuffled pack when a dilemma occurs in a working situation. In this case, the card is trusted even if its appropriateness is quite unclear. They are not final, as new ideas will present themselves, and others will become self-evident.</p>
</blockquote>
<p>观察我们日常的创作，他们背后大多衍生于：回顾（智力追随直觉）、识别、公式。这些卡片可以作为一组，也可以随机抽出一张来使用。不论卡片上的prompt是否完全适合，既然我们有所判断，ideas本身就能得到自我确证。</p>
<p>（参考自 <a href="http://www.rtqe.net/ObliqueStrategies/OSintro.html"><em>A Primer on Oblique Strategizing</em></a> by Gregory Taylor 1997）</p>
<h2 id="卡片列表">
卡片列表
<a href="#%e5%8d%a1%e7%89%87%e5%88%97%e8%a1%a8" class="heading-anchor">#</a>
</h2>
<ul>
<li>Abandon normal instruments</li>
<li>Accept advice</li>
<li>Accretion</li>
<li>A line has two sides</li>
<li>Allow an easement (an easement is the abandonment of a stricture)</li>
<li>Are there sections? Consider transitions</li>
<li>Ask people to work against their better judgment</li>
<li>Ask your body</li>
<li>Assemble some of the instruments in a group and treat the group</li>
<li>Balance the consistency principle with the inconsistency principle</li>
<li>Be dirty</li>
<li>Breathe more deeply</li>
<li>Bridges -build -burn</li>
<li>Cascades</li>
<li>Change instrument roles</li>
<li>Change nothing and continue with immaculate consistency</li>
<li>Children&rsquo;s voices -speaking -singing</li>
<li>Cluster analysis</li>
<li>Consider different fading systems</li>
<li>Consult other sources -promising -unpromising</li>
<li>Convert a melodic element into a rhythmic element</li>
<li>Courage!</li>
<li>Cut a vital connection</li>
<li>Decorate, decorate</li>
<li>Define an area as `safe&rsquo; and use it as an anchor</li>
<li>Destroy -nothing -the most important thing</li>
<li>Discard an axiom</li>
<li>Disconnect from desire</li>
<li>Discover the recipes you are using and abandon them</li>
<li>Distorting time</li>
<li>Do nothing for as long as possible</li>
<li>Don&rsquo;t be afraid of things because they&rsquo;re easy to do</li>
<li>Don&rsquo;t be frightened of cliches</li>
<li>Don&rsquo;t be frightened to display your talents</li>
<li>Don&rsquo;t break the silence</li>
<li>Don&rsquo;t stress one thing more than another</li>
<li>Do something boring</li>
<li>Do the washing up</li>
<li>Do the words need changing?</li>
<li>Do we need holes?</li>
<li>Emphasize differences</li>
<li>Emphasize repetitions</li>
<li>Emphasize the flaws</li>
<li>Faced with a choice, do both (given by Dieter Roth)</li>
<li>Feedback recordings into an acoustic situation</li>
<li>Fill every beat with something</li>
<li>Get your neck massaged</li>
<li>Ghost echoes</li>
<li>Give the game away</li>
<li>Give way to your worst impulse</li>
<li>Go slowly all the way round the outside</li>
<li>Honor thy error as a hidden intention</li>
<li>How would you have done it?</li>
<li>Humanize something free of error</li>
<li>Imagine the music as a moving chain or caterpillar</li>
<li>Imagine the music as a set of disconnected events</li>
<li>Infinitesimal gradations</li>
<li>Intentions -credibility of -nobility of -humility of</li>
<li>Into the impossible</li>
<li>Is it finished?</li>
<li>Is there something missing?</li>
<li>Is the tuning appropriate?</li>
<li>Just carry on</li>
<li>Left channel, right channel, center channel</li>
<li>Listen in total darkness, or in a very large room, very quietly</li>
<li>Listen to the quiet voice</li>
<li>Look at a very small object; look at its center</li>
<li>Look at the order in which you do things</li>
<li>Look closely at the most embarrassing details and amplify them</li>
<li>Lowest common denominator check -single beat -single note -single</li>
<li>riff</li>
<li>Make a blank valuable by putting it in an exquisite frame</li>
<li>Make an exhaustive list of everything you might do and do the last</li>
<li>thing on the list</li>
<li>Make a sudden, destructive, unpredictable action; incorporate</li>
<li>Mechanicalize something idiosyncratic</li>
<li>Mute and continue</li>
<li>Only one element of each kind</li>
<li>(Organic) machinery</li>
<li>Overtly resist change</li>
<li>Put in earplugs</li>
<li>Remember those quiet evenings</li>
<li>Remove ambiguities and convert to specifics</li>
<li>Remove specifics and convert to ambiguities</li>
<li>Repetition is a form of change</li>
<li>Reverse</li>
<li>Short circuit</li>
<li>improve his virility shovels them straight into his lap)</li>
<li>Shut the door and listen from outside</li>
<li>Simple subtraction</li>
<li>Spectrum analysis</li>
<li>Take a break</li>
<li>Take away the elements in order of apparent non-importance</li>
<li>Tape your mouth (given by Ritva Saarikko)</li>
<li>The inconsistency principle</li>
<li>The tape is now the music</li>
<li>Think of the radio</li>
<li>Tidy up</li>
<li>Trust in the you of now</li>
<li>Turn it upside down</li>
<li>Twist the spine</li>
<li>Use an old idea</li>
<li>Use an unacceptable color</li>
<li>Use fewer notes</li>
<li>Use filters</li>
<li>Use &ldquo;unqualified&rdquo; people</li>
<li>Water</li>
<li>What are you really thinking about just now? Incorporate</li>
<li>What is the reality of the situation?</li>
<li>What mistakes did you make last time?</li>
<li>What would your closest friend do?</li>
<li>What wouldn&rsquo;t you do?</li>
<li>Work at a different speed</li>
<li>You are an engineer</li>
<li>You can only make one dot at a time</li>
<li>You don&rsquo;t have to be ashamed of using your own ideas</li>
<li>[blank white card]</li>
</ul>
<style>ul{width:unset;max-width:85%;font-family:var(--sans);}</style>


          
      
          <a class="u-url" href="https://fanrongbin.com/oblique-strategies/" hidden="from-humans" style="display:none;"></a>
      

      </main>
      
      
      <a class="u-bridgy-fed" rel="bridgy" href="https://fed.brid.gy/" hidden="from-humans" style="display:none;"></a>

  
  </article>
  

  
  



<div class="footer-nav">




<div class="previous-post" style="display:inline-block;">
  
    
      <a class="no-external" href="/github-actions-deploy-hugo/"><span class="arrow">←</span> 使用 Github Actions 自动部署 Hugo</a>
    
  
</div>





<div class="next-post" style="display:inline-block;float:right;">
  
    
      <a class="no-external" href="/2023-my-time-is-like-water/">2023 年终：我的时间是水 <span class="arrow">→</span></a>
    
  
</div>

</div>






  

<h2 class="comment-title">Comment</h2>
<details class="comment-box">
  <summary>Login via Github</summary>
<div id="giscus">
  <script id="giscus-script" src="https://giscus.app/client.js" data-repo="rongbinf/giscus-comment"
      data-repo-id="R_kgDOK3UYzw" data-category="Announcements"
      data-category-id="DIC_kwDOK3UYz84Cbl2R" data-mapping="title" data-strict="0"
      data-reactions-enabled="0" data-emit-metadata="0" data-input-position="top"
      data-theme="https://fanrongbin.com/giscus.css" data-lang="en" data-loading="lazy"
      crossorigin="anonymous" defer>
      </script>
</div>
</details>

<details class="comment-box">
  <summary>No Login</summary>
  <div id="tcomment"></div>
  <script src="https://cdn.jsdelivr.net/npm/twikoo@1.6.36/dist/twikoo.all.min.js" integrity="sha384-4KfOjEinLSkv1i1J8TzlkC/RTnuiLoR1OLerVgjEKoH5djYtbf7mzEFsz9p3nfuA" crossorigin="anonymous" onload="initTwikoo()" defer></script>
  <script>
  function initTwikoo() {
    twikoo.init({
      envId: 'https://twikoo.fanrongbin.com',
      el: '#tcomment',
      lang: 'en',
    });
  }
  </script>
  <style>
    .twikoo svg{
      margin: 0;
    }
    .tk-avatar .tk-avatar-img {
      margin: 0;
    }
    .el-input-group__append, .el-input-group__prepend {
      background-color: unset !important;
      border: unset !important;
    }
    .el-input__inner, .el-textarea__inner {
      border: 0;
      border-bottom: 1px solid var(--text-color);
      border-radius: 0;
    }
    .el-input.is-active .el-input__inner, .el-input__inner:focus,
    .twikoo .el-input__inner:focus, .twikoo .el-textarea__inner:focus {
      border-color: var(--text-color) !important;
    }
    .el-button--primary {
      background-color: var(--highlight) !important;
    }
    .el-button--primary.is-disabled {
      background-color: var(--highlight) !important;
      border: 0 !important;
      opacity: 0.5 !important;
    }
    .twikoo .el-button:not(.el-button--primary):not(.el-button--text):hover {
      border-color: white !important;
      background-color: var(--highlight) !important;
      color: white !important;
    }
    .tk-submit-action-icon.__markdown {
      border: none;
    }
    .tk-submit-action-icon.__markdown::after {
      content: none;
    }
    .tk-icon.__comments {
      color: var(--highlight);
    }
  </style>
</details>

<details class="comment-box">
  <summary>Webmention</summary>
  <script src="/webmention.min.js" defer></script>
  <div id="webmentions"></div>
  <div>
    <p>
      
      What is <a
    href="/hugo-webmention-bridgy-mastodon">Webmention</a>?</p>
    <form class="webmention-form" action="https://webmention.io/fanrongbin.com/webmention" method="post" style="margin: 2ch 0;">
          <input type="url" name="source" class="url" placeholder="Your URL" required="">
          <input type="hidden" name="target" value="https://fanrongbin.com/oblique-strategies/">
          <input type="submit" value="Send" style="background:var(--bg-color);">
    </form>
  </div>
</details>

<details class="comment-box">
  <summary><a id="commenthypo" onclick="showHypo();">Hypothes.is</a></summary>
  </details>


  

  <footer class="opacity-6">
    <p><a href="/colophon">Colophon</a></p><p><a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank">CC BY-SA 4.0</a></p>
  </footer>

</body>

<script src="/han.min.js" defer></script>



<script type="application/json" class="js-hypothesis-config" defer>
{
    "sideBySide": {
        "mode": "manual"
    }
}
</script>

<script defer>
    var mainElement = document.querySelector('main');
    var contentHeader = document.querySelector('section.content-header');
    const headers = mainElement.querySelectorAll('h2, h3');
    document.addEventListener('DOMContentLoaded', function () {

        if (contentHeader) {
            contentHeader.querySelector('#show-hypo').style.display = 'flex';
        }

        handleScrollEvents();

        applyBreakAllClass();

        setupSidenotes();

        initializeMutationObserver();

        initializeTOCFeatures();

        preventMultiTouchGestures();

        setExternalLinksToOpenInNewTab();
    });

    function updateHHangableBehavior() {
        var sidenoteHangables = mainElement.querySelectorAll('.sidenote-number + h-hangable');
        sidenoteHangables.forEach(function (hHangable) {
            var sidenoteNumber = hHangable.previousElementSibling;
            var sidenoteBox = sidenoteNumber.querySelector('.sidenote-box');
            if (sidenoteBox) {
                sidenoteNumber.insertBefore(hHangable, sidenoteBox);
            }
        });
    }

    function initializeMutationObserver() {
        var observer = new MutationObserver(function (mutations) {
            var shouldUpdate = false;
            mutations.forEach(function (mutation) {
                mutation.addedNodes.forEach(function (node) {
                    if (node.nodeType === 1 && node.matches('h-hangable')) {
                        var previousSibling = node.previousElementSibling;
                        if (previousSibling && previousSibling.matches('.sidenote-number')) {
                            shouldUpdate = true;
                        }
                    }
                });
            });
            if (shouldUpdate) {
                setTimeout(updateHHangableBehavior, 1200);
            }
        });

        var config = { childList: true, subtree: true };
        if (mainElement) {
            observer.observe(mainElement, config);
        }
    }

    function applyBreakAllClass() {
        var screenWidth = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;
        var codeElements = mainElement.querySelectorAll('code');

        codeElements.forEach(function (element) {
            if (screenWidth <= 960) {
                if (element.textContent.length > 10) {
                    element.classList.add('break-all');
                }
            }
            else {
                if (element.textContent.length > 30) {
                    element.classList.add('break-all');
                }
            }
        });
    }

    function handleScrollEvents() {
        if (contentHeader) {
            let lastScrollTop = 0;
            let isScrolling = false;
            const addnDiv = contentHeader.querySelector('.addn');
            const topScrollBar = contentHeader.querySelector('.top-scroll-bar');

            window.addEventListener('scroll', function () {
                const currentScroll = window.pageYOffset || document.documentElement.scrollTop;
                if (!isScrolling) {
                    window.requestAnimationFrame(function () {
                        if (topScrollBar) {
                            const scrollPercent = (currentScroll / (document.documentElement.scrollHeight - window.innerHeight)) * 100;
                            topScrollBar.style.width = scrollPercent + '%';
                            topScrollBar.style.display = 'block';
                        }
                        if (addnDiv) {
                            if (currentScroll > lastScrollTop && currentScroll > 50) {
                                addnDiv.classList.remove('visible');
                            } else {
                                addnDiv.classList.add('visible');
                            }
                        }
                        lastScrollTop = currentScroll <= 0 ? 0 : currentScroll;
                        isScrolling = false;
                    });
                    isScrolling = true;
                }
                if (window.innerWidth >= 1600) {
                    toggleTOCOnScroll();
                }
            }, false);
        }
    }

    function showHypo() {
        var existingScript = document.getElementById('hypothes-script');
        var button = contentHeader.querySelector('#show-hypo');

        var commentHypo = document.getElementById("commenthypo");

        if (!existingScript) {
            button.textContent = 'Loading';
            commentHypo.textContent = 'Loading'

            var script = document.createElement('script');
            script.id = 'hypothes-script';
            script.src = 'https://hypothes.is/embed.js';

            script.onload = () => {
                button.textContent = 'Hypothes.is';
                commentHypo.textContent = 'You can now select texts to highlight or note.'
            };

            script.onerror = () => {
                button.style.color = 'red';
                button.textContent = 'Failed';
                commentHypo.textContent = 'Network error. Please refresh and try again.'
            };

            
            document.body.appendChild(script);
        } else {
            toggleHypothesisElementsVisibility();
            button.style.color = 'var(--text-color)';
        }
    }

    function toggleHypothesisElementsVisibility() {
        const elementsToToggle = [
            'hypothesis-sidebar',
            'hypothesis-notebook',
            'hypothesis-profile',
            'hypothesis-adder',
            'hypothesis-highlight-cluster-toolbar'
        ];

        elementsToToggle.forEach(function (element) {
            var el = document.querySelector(element);
            if (el) {
                if (el.style.display === 'none') {
                    el.style.display = '';
                } else {
                    el.style.display = 'none';
                }
            }
        });
    }


    function initializeTOCFeatures() {
        if (contentHeader) {
            const contentsFixedDiv = contentHeader.querySelector('#contents-fixed');
            const tocContainer = contentHeader.querySelector('#contents-toc');
            if (contentsFixedDiv && headers.length > 1) {
                contentsFixedDiv.style.display = 'flex';
                contentsFixedDiv.addEventListener('click', (event) => {
                    toggleTOC();
                    event.stopPropagation();
                });
            }
            if (tocContainer && !tocContainer.dataset.initialized) {
                const throttledHighlight = throttle(highlightAppropriateHeader, 250);
                window.addEventListener('scroll', throttledHighlight);
                tocContainer.dataset.initialized = 'true';
            }
        }
    }

    function highlightAppropriateHeader() {
        let highlightedHeader = null;
        let foundHeaderInView = false;

        
        for (let i = 0; i < headers.length; i++) {
            const header = headers[i];
            const bounding = header.getBoundingClientRect();

            if (bounding.top >= 0 && bounding.bottom <= window.innerHeight) {
                highlightedHeader = header; 
                foundHeaderInView = true;
                break;
            }
        }

        
        if (!foundHeaderInView) {
            for (let i = 0; i < headers.length; i++) {
                const header = headers[i];
                let nextHeader = headers[i + 1];
                let endOfSection = nextHeader ? nextHeader.getBoundingClientRect().top : Infinity;

                const startOfSection = header.getBoundingClientRect().bottom;

                if (startOfSection < window.innerHeight && endOfSection > 0) {
                    highlightedHeader = header;
                    break;
                }
            }
        }

        
        contentHeader.querySelectorAll('nav#TableOfContents a').forEach(link => {
            link.classList.remove('toc-highlight');
        });

        
        if (highlightedHeader) {
            const link = contentHeader.querySelector(`nav#TableOfContents a[href="#${highlightedHeader.id}"]`);
            if (link) {
                link.classList.add('toc-highlight');
            }
        }
    }

    function toggleTOC() {
        const tocContainer = contentHeader.querySelector('#contents-toc');
        const isDisplayed = window.getComputedStyle(tocContainer).display !== 'none';
        tocContainer.style.display = isDisplayed ? 'none' : 'flex';
    }

    function toggleTOCOnScroll() {
        const tocContainer = document.querySelector('#TableOfContents');
        const footerNav = document.querySelector('.footer-nav');

        if (!tocContainer || !footerNav) return;

        const footerNavTop = footerNav.getBoundingClientRect().top;
        const windowHeight = window.innerHeight;

        
        if (footerNavTop <= windowHeight) {
            tocContainer.style.display = 'none';
        } else {
            tocContainer.style.display = 'flex';
        }
    }

    function throttle(func, limit) {
        let lastFunc;
        let lastRan;
        return function () {
            const context = this;
            const args = arguments;
            if (!lastRan) {
                func.apply(context, args);
                lastRan = Date.now();
            } else {
                clearTimeout(lastFunc);
                lastFunc = setTimeout(function () {
                    if ((Date.now() - lastRan) >= limit) {
                        func.apply(context, args);
                        lastRan = Date.now();
                    }
                }, limit - (Date.now() - lastRan));
            }
        }
    }

    function setExternalLinksToOpenInNewTab() {
        const links = document.querySelectorAll('.e-content a[href*="//"]:not(.stream-url):not(.stream-time)');
        const linkDisplay = document.querySelector('.link-display');

        links.forEach(function (link) {
            link.setAttribute('target', '_blank');

            link.addEventListener('mouseover', function () {
                const url = new URL(this.href);
                const rootDomain = url.hostname.replace(/^www\./, '');
                const boldDomain = `<span class="bold-domain">${rootDomain}</span>`;
                const displayUrl = this.href.replace(rootDomain, boldDomain);

                linkDisplay.innerHTML = displayUrl;
                linkDisplay.style.display = 'block';
                const linkRect = this.getBoundingClientRect();
                linkDisplay.style.top = `${linkRect.bottom + window.scrollY}px`;
                linkDisplay.style.left = `${linkRect.left + window.scrollX}px`;
            });

            link.addEventListener('mouseout', function () {
                linkDisplay.style.display = 'none';
            });
        });
    }

    function setupSidenotes() {
        if (mainElement.querySelectorAll('.sidenote-number').length >= 3 && window.innerWidth >= 1000) {
            const sidenoteLine = mainElement.querySelectorAll('.sidenote-line');

            sidenoteLine.forEach(element => {
                element.style.border = 'none';
            });

            var jQueryScript = document.createElement('script');
            jQueryScript.src = '/jquery-3.6.0.min.js';
            document.head.appendChild(jQueryScript);

            jQueryScript.onload = function () {
                var jsPlumbScript = document.createElement('script');
                jsPlumbScript.src = '/jsplumb.min.js';
                document.head.appendChild(jsPlumbScript);

                jsPlumbScript.onload = function () {
                    initJsPlumb();
                };
            };
        }
    }

    function initJsPlumb() {
        var jsPlumbCSS = document.createElement('link');
        jsPlumbCSS.href = '/jsplumbtoolkit-defaults.min.css';
        jsPlumbCSS.rel = 'stylesheet';
        document.head.appendChild(jsPlumbCSS);

        jQuery(document).ready(function () {
            jsPlumb.importDefaults({
                ConnectionsDetachable: false,
                ReattachConnections: false,
                Endpoint: "Blank",
                Connector: ["Straight"],
                PaintStyle: { stroke: "var(--text-color)", strokeWidth: 1 }
            });

            createConnections();
            var resizeObserver = new ResizeObserver(function () {
                createConnections();
            });
            resizeObserver.observe(document.body);
        });
    }

    function createConnections() {
        jsPlumb.deleteEveryEndpoint();
        jQuery('.sidenote-number').each(function () {
            var sidenoteNumber = jQuery(this);
            var sidenote = sidenoteNumber.find('.sidenote');

            if (sidenote.length) {
                jsPlumb.connect({
                    source: sidenoteNumber[0],
                    target: sidenote[0],
                    anchors: ["Center", "RightMiddle"],
                    cssClass: "jsplumb-line"
                });
            }
        });
    }


    function preventMultiTouchGestures() {
        window.onload = function () {
            document.addEventListener('touchstart', function (event) {
                if (event.touches.length > 1) {
                    event.preventDefault();
                }
            }, false);
            var lastTouchEnd = 0;
            document.addEventListener('touchend', function (event) {
                var now = (new Date()).getTime();
                if (now - lastTouchEnd <= 300) {
                    event.preventDefault();
                }
                lastTouchEnd = now;
            }, false);
            document.addEventListener('gesturestart', function (event) {
                event.preventDefault();
            }, false);
        }
    }
</script>

</html>