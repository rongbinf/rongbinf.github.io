<!DOCTYPE html>

<html lang="zh-Hans"  dir="ltr"

>

<head>
  <title class="p-name">简化，回归 - Rongbin&#39;s Blog</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
<meta name="description"
    content="由于常年固定使用某些邮箱注册帐户，以及邮件订阅设置的混乱，导致我不得不腾出一个下午的时间清理这些邮件，大多是注册帐户时发来的验证、社交网络的提醒、过去订阅的博客资讯和提醒你时常回看的应用广告。于是我把现在已经不常用的、能合并或替代的各类帐号注销，一是方便管理，二是删除自己曾经留下的网络痕迹。
进行邮件清理后，我试着对自己的信息源进行管理。我把自己获取信息的途径分为三种：信息聚合类应用、订阅邮件和 RSS 订阅源。信息聚合类应用包括 Medium 、微信订阅号和知乎专栏这种长文聚合，以及 Quora 的问答、端传媒等新闻资讯应用。在这之中比较难管理的是微信订阅号。有部分作者有个人博客的，我都将其收进 Reeder 用 RSS 订阅的形式阅读，但部分只有个人公众号的作者，需要进一步对内容作出筛选，或者寻找能 push 的第三方服务。使用邮件订阅或 RSS 的形式阅读，最大的优点是即时离线存档，不仅便于日后阅读和搜索归档，也避免了一些文章被封锁的风险。
由此出发，其实最终需要花费心思的是对信息源的筛选和整合。如何最大限度地利用网络信息帮助自己成长？
Leo Babauta 在他的著名博客 zen habits 中提到了一个很有趣的观点。他认为生活的简化是一种循环的模式：

The Simplicity Cycle goes something like this (it’s a little different each time):

Inspiration phase: You find something that sparks an interest, and you start exploring it (reading about a new topic, diving into learning a new subject, exploring a new activity or hobby, creating a new project or venture, etc.). This is the inspiration phase.
Addition phase: This leads you to more complexity, as you explore, buy things, read more and more, find new inspirations and ideas. This is the addition phase.
Contemplation phase: At some point, you might pause to consider the bigger picture of what you’re doing. Is this the best way? Is this really important? If it is, what’s the most essential part of it? Can you pare down? Many people skip this phase (and the next) and just keep doing the first two phases.
Paring Down phase: If you decided that you want to pare down, this is where you start to let go of things. You figure out what’s essential to what you have been doing and learning, and if you don’t scrap the entire thing completely (which can happen), you might just keep a few key things. For example, if you start learning about chess, you might buy a set (or two) and a bunch of books and apps and go on a bunch of websites. But in the paring down phase, you might decide that chess isn’t important enough to keep in your life, or if it is, you only need one chess set, two really key books, and one website or app. The rest you let go of. Again, many people skip this step.


它分成四个阶段：探索阶段、深入阶段、思考阶段和削减阶段。在前两个阶段，你大量的获取和收集感兴趣的信息，并且进行了一定的拓宽。例如在偶然一则热带风暴的新闻中，记者提到了风眼这个名词，由此你上网查找资料以了解这个天气的成因、结构等等。单个天气系统不足以满足好奇心，你转而寻找能够集合这类资讯和推送给你的信息源，久而久之，你可能就拥有了一定数量该领域的信息源。这两个阶段是你好奇心和能力拓展的主要阶段，但在前两个阶段我们做的工作可能会比较盲目，你可能不常会回看这些订阅关注的信息源，而这些信息源在之后也许会因为各种各样的原因停用，或是转为其他内容。为了让自己获取的信息更有价值、阅读更高效，我们要做的并非一开始就抑制自己收集信息的想法，而是收集之后再简化。就像 GTD 中 Inbox 的概念一样，在这里我们也需要一个无形的 Inbox 把它们收集起来。 ">
<meta name="author p-author" content="Rongbin FAN" href="https://fanrongbin.com">

<meta property="og:title" content="简化，回归 - Rongbin&#39;s Blog" />
<meta property="og:description" content="由于常年固定使用某些邮箱注册帐户，以及邮件订阅设置的混乱，导致我不得不腾出一个下午的时间清理这些邮件，大多是注册帐户时发来的验证、社交网络的提醒、过去订阅的博客资讯和提醒你时常回看的应用广告。于是我把现在已经不常用的、能合并或替代的各类帐号注销，一是方便管理，二是删除自己曾经留下的网络痕迹。
进行邮件清理后，我试着对自己的信息源进行管理。我把自己获取信息的途径分为三种：信息聚合类应用、订阅邮件和 RSS 订阅源。信息聚合类应用包括 Medium 、微信订阅号和知乎专栏这种长文聚合，以及 Quora 的问答、端传媒等新闻资讯应用。在这之中比较难管理的是微信订阅号。有部分作者有个人博客的，我都将其收进 Reeder 用 RSS 订阅的形式阅读，但部分只有个人公众号的作者，需要进一步对内容作出筛选，或者寻找能 push 的第三方服务。使用邮件订阅或 RSS 的形式阅读，最大的优点是即时离线存档，不仅便于日后阅读和搜索归档，也避免了一些文章被封锁的风险。
由此出发，其实最终需要花费心思的是对信息源的筛选和整合。如何最大限度地利用网络信息帮助自己成长？
Leo Babauta 在他的著名博客 zen habits 中提到了一个很有趣的观点。他认为生活的简化是一种循环的模式：

The Simplicity Cycle goes something like this (it’s a little different each time):

Inspiration phase: You find something that sparks an interest, and you start exploring it (reading about a new topic, diving into learning a new subject, exploring a new activity or hobby, creating a new project or venture, etc.). This is the inspiration phase.
Addition phase: This leads you to more complexity, as you explore, buy things, read more and more, find new inspirations and ideas. This is the addition phase.
Contemplation phase: At some point, you might pause to consider the bigger picture of what you’re doing. Is this the best way? Is this really important? If it is, what’s the most essential part of it? Can you pare down? Many people skip this phase (and the next) and just keep doing the first two phases.
Paring Down phase: If you decided that you want to pare down, this is where you start to let go of things. You figure out what’s essential to what you have been doing and learning, and if you don’t scrap the entire thing completely (which can happen), you might just keep a few key things. For example, if you start learning about chess, you might buy a set (or two) and a bunch of books and apps and go on a bunch of websites. But in the paring down phase, you might decide that chess isn’t important enough to keep in your life, or if it is, you only need one chess set, two really key books, and one website or app. The rest you let go of. Again, many people skip this step.


它分成四个阶段：探索阶段、深入阶段、思考阶段和削减阶段。在前两个阶段，你大量的获取和收集感兴趣的信息，并且进行了一定的拓宽。例如在偶然一则热带风暴的新闻中，记者提到了风眼这个名词，由此你上网查找资料以了解这个天气的成因、结构等等。单个天气系统不足以满足好奇心，你转而寻找能够集合这类资讯和推送给你的信息源，久而久之，你可能就拥有了一定数量该领域的信息源。这两个阶段是你好奇心和能力拓展的主要阶段，但在前两个阶段我们做的工作可能会比较盲目，你可能不常会回看这些订阅关注的信息源，而这些信息源在之后也许会因为各种各样的原因停用，或是转为其他内容。为了让自己获取的信息更有价值、阅读更高效，我们要做的并非一开始就抑制自己收集信息的想法，而是收集之后再简化。就像 GTD 中 Inbox 的概念一样，在这里我们也需要一个无形的 Inbox 把它们收集起来。 " />
<meta property="og:url" content="https://fanrongbin.com/come-back-home/" />
<meta property="og:image" content="https://fanrongbin.com/apple-touch-icon.png" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://fanrongbin.com/apple-touch-icon.png" />
<meta name="twitter:title" content="简化，回归 - Rongbin&#39;s Blog" />
<meta name="twitter:description" content="由于常年固定使用某些邮箱注册帐户，以及邮件订阅设置的混乱，导致我不得不腾出一个下午的时间清理这些邮件，大多是注册帐户时发来的验证、社交网络的提醒、过去订阅的博客资讯和提醒你时常回看的应用广告。于是我把现在已经不常用的、能合并或替代的各类帐号注销，一是方便管理，二是删除自己曾经留下的网络痕迹。
进行邮件清理后，我试着对自己的信息源进行管理。我把自己获取信息的途径分为三种：信息聚合类应用、订阅邮件和 RSS 订阅源。信息聚合类应用包括 Medium 、微信订阅号和知乎专栏这种长文聚合，以及 Quora 的问答、端传媒等新闻资讯应用。在这之中比较难管理的是微信订阅号。有部分作者有个人博客的，我都将其收进 Reeder 用 RSS 订阅的形式阅读，但部分只有个人公众号的作者，需要进一步对内容作出筛选，或者寻找能 push 的第三方服务。使用邮件订阅或 RSS 的形式阅读，最大的优点是即时离线存档，不仅便于日后阅读和搜索归档，也避免了一些文章被封锁的风险。
由此出发，其实最终需要花费心思的是对信息源的筛选和整合。如何最大限度地利用网络信息帮助自己成长？
Leo Babauta 在他的著名博客 zen habits 中提到了一个很有趣的观点。他认为生活的简化是一种循环的模式：

The Simplicity Cycle goes something like this (it’s a little different each time):

Inspiration phase: You find something that sparks an interest, and you start exploring it (reading about a new topic, diving into learning a new subject, exploring a new activity or hobby, creating a new project or venture, etc.). This is the inspiration phase.
Addition phase: This leads you to more complexity, as you explore, buy things, read more and more, find new inspirations and ideas. This is the addition phase.
Contemplation phase: At some point, you might pause to consider the bigger picture of what you’re doing. Is this the best way? Is this really important? If it is, what’s the most essential part of it? Can you pare down? Many people skip this phase (and the next) and just keep doing the first two phases.
Paring Down phase: If you decided that you want to pare down, this is where you start to let go of things. You figure out what’s essential to what you have been doing and learning, and if you don’t scrap the entire thing completely (which can happen), you might just keep a few key things. For example, if you start learning about chess, you might buy a set (or two) and a bunch of books and apps and go on a bunch of websites. But in the paring down phase, you might decide that chess isn’t important enough to keep in your life, or if it is, you only need one chess set, two really key books, and one website or app. The rest you let go of. Again, many people skip this step.


它分成四个阶段：探索阶段、深入阶段、思考阶段和削减阶段。在前两个阶段，你大量的获取和收集感兴趣的信息，并且进行了一定的拓宽。例如在偶然一则热带风暴的新闻中，记者提到了风眼这个名词，由此你上网查找资料以了解这个天气的成因、结构等等。单个天气系统不足以满足好奇心，你转而寻找能够集合这类资讯和推送给你的信息源，久而久之，你可能就拥有了一定数量该领域的信息源。这两个阶段是你好奇心和能力拓展的主要阶段，但在前两个阶段我们做的工作可能会比较盲目，你可能不常会回看这些订阅关注的信息源，而这些信息源在之后也许会因为各种各样的原因停用，或是转为其他内容。为了让自己获取的信息更有价值、阅读更高效，我们要做的并非一开始就抑制自己收集信息的想法，而是收集之后再简化。就像 GTD 中 Inbox 的概念一样，在这里我们也需要一个无形的 Inbox 把它们收集起来。 " />

<link rel="canonical" href="https://fanrongbin.com/come-back-home/" />






      <link rel="stylesheet" href="/css/main.min.a9084cdef5fd905236c5559e57631f5e5f660bc8e8ccb79e3a8743d4c41492dd.css" integrity="sha256-qQhM3vX9kFI2xVWeV2MfXl9mC8jozLeeOodD1MQUkt0=" crossorigin="anonymous">

<link rel="stylesheet" href="/han.min.css" type="text/css">





<link rel="alternate" type="application/activity+json" href="https://fed.brid.gy/r/https://fanrongbin.com/come-back-home/">

<link rel="webmention" href="https://webmention.io/fanrongbin.com/webmention" />

<script data-goatcounter="https://ron.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
</head>

<body class="han-init-context">

  <section class="navbar">
    <span class="header-name">
    <a href="/" class="header-link h-card p-name p-author u-url u-uid">Rongbin FAN</a>
     / <a href="/posts" class="header-link">Blog</a>
    <br>
    
    <a href="/stream" class="header-link header-guestbook">ϟ Stream</a>
    <a href="/resources" class="header-link header-guestbook">↺ Resources</a>
    <a href="/links" class="header-link header-guestbook">◩ Guestbook</a>
    
</span>


  </section>

  <article class="article-entry h-entry">
      

<section class="content-header">

  <div class="top-scroll-bar"></div>
<div class="addn visible">
<a onclick="showHypo()" style="color:var(--textcolor);text-decoration:none;border:none;"><div id="show-hypo" class="header-button no-select">Hypothes.is</div></a>
<a onclick="toggleTOC()" style="color:var(--textcolor);text-decoration:none;border:none;"><div id="contents-fixed" class="header-button no-select">Contents</div></a>
</div>
<div id="contents-toc" class="no-select">
    <nav id="TableOfContents"></nav>
</div>

  

  <div id="single-header">
    <h1 class="p-name content-h1">简化，回归</h1>
    

    
      
      
      
        
        <p class="content-time"><time class="dt-published" datetime="2018-08-28T00:00:00&#43;00:00">28 August 2018</time></p>
        
      
    

    <a rel="author" class="p-name h-card" href="https://fanrongbin.com" style="display:none;">Rongbin Fan</a>
  </div>

  

</section>





<style>
  .navbar, footer, .footer-nav, .webmentions-how, .comment-box, .comment-title {
    opacity: 0.35 !important;
  }
  .navbar:hover, footer:hover, .footer-nav:hover, .webmentions-how:hover, .comment-box:hover {
    opacity: 1 !important;
  }
</style>



<div class="link-display"></div>


      
      
      
      <main class="e-content">
      
      














    

    

    

<p>由于常年固定使用某些邮箱注册帐户，以及邮件订阅设置的混乱，导致我不得不腾出一个下午的时间清理这些邮件，大多是注册帐户时发来的验证、社交网络的提醒、过去订阅的博客资讯和提醒你时常回看的应用广告。于是我把现在已经不常用的、能合并或替代的各类帐号注销，一是方便管理，二是删除自己曾经留下的网络痕迹。</p>
<p>进行邮件清理后，我试着对自己的信息源进行管理。我把自己获取信息的途径分为三种：信息聚合类应用、订阅邮件和 RSS 订阅源。信息聚合类应用包括 Medium 、微信订阅号和知乎专栏这种长文聚合，以及 Quora 的问答、端传媒等新闻资讯应用。在这之中比较难管理的是微信订阅号。有部分作者有个人博客的，我都将其收进 Reeder 用 RSS 订阅的形式阅读，但部分只有个人公众号的作者，需要进一步对内容作出筛选，或者寻找能 push 的第三方服务。使用邮件订阅或 RSS 的形式阅读，最大的优点是即时离线存档，不仅便于日后阅读和搜索归档，也避免了一些文章被封锁的风险。</p>
<p>由此出发，其实最终需要花费心思的是对信息源的筛选和整合。如何最大限度地利用网络信息帮助自己成长？</p>
<p>Leo Babauta 在他的著名博客 <a href="https://zenhabits.net/cycle/">zen habits</a> 中提到了一个很有趣的观点。他认为生活的简化是一种循环的模式：</p>
<blockquote>
<p>The Simplicity Cycle goes something like this (it’s a little different each time):</p>
<ol>
<li><strong>Inspiration phase</strong>: You find something that sparks an interest, and you start exploring it (reading about a new topic, diving into learning a new subject, exploring a new activity or hobby, creating a new project or venture, etc.). This is the inspiration phase.</li>
<li><strong>Addition phase</strong>: This leads you to more complexity, as you explore, buy things, read more and more, find new inspirations and ideas. This is the addition phase.</li>
<li><strong>Contemplation phase</strong>: At some point, you might pause to consider the bigger picture of what you’re doing. Is this the best way? Is this really important? If it is, what’s the most essential part of it? Can you pare down? Many people skip this phase (and the next) and just keep doing the first two phases.</li>
<li><strong>Paring Down phase</strong>: If you decided that you want to pare down, this is where you start to let go of things. You figure out what’s essential to what you have been doing and learning, and if you don’t scrap the entire thing completely (which can happen), you might just keep a few key things. For example, if you start learning about chess, you might buy a set (or two) and a bunch of books and apps and go on a bunch of websites. But in the paring down phase, you might decide that chess isn’t important enough to keep in your life, or if it is, you only need one chess set, two really key books, and one website or app. The rest you let go of. Again, many people skip this step.</li>
</ol>
</blockquote>
<p>它分成四个阶段：探索阶段、深入阶段、思考阶段和削减阶段。在前两个阶段，你大量的获取和收集感兴趣的信息，并且进行了一定的拓宽。例如在偶然一则热带风暴的新闻中，记者提到了风眼这个名词，由此你上网查找资料以了解这个天气的成因、结构等等。单个天气系统不足以满足好奇心，你转而寻找能够集合这类资讯和推送给你的信息源，久而久之，你可能就拥有了一定数量该领域的信息源。这两个阶段是你好奇心和能力拓展的主要阶段，但在前两个阶段我们做的工作可能会比较盲目，你可能不常会回看这些订阅关注的信息源，而这些信息源在之后也许会因为各种各样的原因停用，或是转为其他内容。为了让自己获取的信息更有价值、阅读更高效，我们要做的并非一开始就抑制自己收集信息的想法，而是收集之后再简化。就像 GTD 中 Inbox 的概念一样，在这里我们也需要一个无形的 Inbox 把它们收集起来。</p>
<p>思考阶段则是你对获得的这些信息的分类筛选。这些信息我真的需要吗？我对这个真的感兴趣吗？例如你只是想知道热带风暴的成因和防灾的方法，而不想再去了解它是怎么被预报之类的，你很自然地开始了思考阶段并作出了判断——针对性的收集信息。并且开始削减阶段——削减之前收集到的不感兴趣的内容。</p>
<p>上述模式，核心是给我们营造了「回归」的条件，也即思考我们实际的需求是什么，回归到这上来。任何事情都需要一个目的、存在某种需求以驱使我们行动，回归需求即给予我们动力，并且避免了不必要事情的干扰，最终达到趋于平静的一种状态。</p>



          
      
          <a class="u-url" href="https://fanrongbin.com/come-back-home/" hidden="from-humans" style="display:none;"></a>
      

      </main>
      
      
      <a class="u-bridgy-fed" rel="bridgy" href="https://fed.brid.gy/" hidden="from-humans" style="display:none;"></a>

  
  </article>
  

  
  



<div class="footer-nav">




<div class="previous-post" style="display:inline-block;">
  
    
      <a class="no-external" href="/hexo-github-pages-cloudflare/"><span class="arrow">←</span> Hexo + GitHub Pages + Cloudflare</a>
    
  
</div>





<div class="next-post" style="display:inline-block;float:right;">
  
    
      <a class="no-external" href="/339/">白色的空间 <span class="arrow">→</span></a>
    
  
</div>

</div>






  

<h2 class="comment-title">Comment</h2>
<details class="comment-box">
  <summary>Login via Github</summary>
<div id="giscus">
  <script id="giscus-script" src="https://giscus.app/client.js" data-repo="rongbinf/giscus-comment"
      data-repo-id="R_kgDOK3UYzw" data-category="Announcements"
      data-category-id="DIC_kwDOK3UYz84Cbl2R" data-mapping="pathname" data-strict="0"
      data-reactions-enabled="0" data-emit-metadata="0" data-input-position="top"
      data-theme="https://fanrongbin.com/giscus.css" data-lang="en" data-loading="lazy"
      crossorigin="anonymous" defer>
      </script>
</div>
</details>

<details class="comment-box">
  <summary>No Login</summary>
  <div id="tcomment"></div>
  <script src="https://cdn.jsdelivr.net/npm/twikoo@1.6.36/dist/twikoo.all.min.js" integrity="sha384-4KfOjEinLSkv1i1J8TzlkC/RTnuiLoR1OLerVgjEKoH5djYtbf7mzEFsz9p3nfuA" crossorigin="anonymous" onload="initTwikoo()" defer></script>
  <script>
  function initTwikoo() {
    twikoo.init({
      envId: 'https://twikoo.fanrongbin.com',
      el: '#tcomment',
      lang: 'en',
    });
  }
  </script>
  <style>
    .twikoo svg{
      margin: 0;
    }
    .tk-avatar .tk-avatar-img {
      margin: 0;
    }
    .el-input-group__append, .el-input-group__prepend {
      background-color: unset !important;
      border: unset !important;
    }
    .el-input__inner, .el-textarea__inner {
      border: 0;
      border-bottom: 1px solid var(--text-color);
      border-radius: 0;
    }
    .el-input.is-active .el-input__inner, .el-input__inner:focus,
    .twikoo .el-input__inner:focus, .twikoo .el-textarea__inner:focus {
      border-color: var(--text-color) !important;
    }
    .el-button--primary {
      background-color: var(--highlight) !important;
    }
    .el-button--primary.is-disabled {
      background-color: var(--highlight) !important;
      border: 0 !important;
      opacity: 0.5 !important;
    }
    .twikoo .el-button:not(.el-button--primary):not(.el-button--text):hover {
      border-color: white !important;
      background-color: var(--highlight) !important;
      color: white !important;
    }
    .tk-submit-action-icon.__markdown {
      border: none;
    }
    .tk-submit-action-icon.__markdown::after {
      content: none;
    }
    .tk-icon.__comments {
      color: var(--highlight);
    }
  </style>
</details>

<details class="comment-box">
  <summary>Webmention</summary>
  <script src="/webmention.min.js" defer></script>
  <div id="webmentions"></div>
  <div>
    <p>
      
      What is <a
    href="/hugo-webmention-bridgy-mastodon">Webmention</a>?</p>
    <form class="webmention-form" action="https://webmention.io/fanrongbin.com/webmention" method="post" style="margin: 2ch 0;">
          <input type="url" name="source" class="url" placeholder="Your URL" required="">
          <input type="hidden" name="target" value="https://fanrongbin.com/come-back-home/">
          <input type="submit" value="Send" style="background:var(--bg-color);">
    </form>
  </div>
</details>

<details class="comment-box">
  <summary><a id="commenthypo" onclick="showHypo();">Hypothes.is</a></summary>
  </details>


  

  <footer class="opacity-6">
    <p><a href="/colophon">Colophon</a></p><p><a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank">CC BY-SA 4.0</a></p>
  </footer>

</body>

<script src="/han.min.js" defer></script>



<script type="application/json" class="js-hypothesis-config" defer>
{
    "sideBySide": {
        "mode": "manual"
    }
}
</script>

<script defer>
    var mainElement = document.querySelector('main');
    var contentHeader = document.querySelector('section.content-header');
    const headers = mainElement.querySelectorAll('h2, h3');
    document.addEventListener('DOMContentLoaded', function () {

        if (contentHeader) {
            contentHeader.querySelector('#show-hypo').style.display = 'flex';
        }

        handleScrollEvents();

        applyBreakAllClass();

        setupSidenotes();

        initializeMutationObserver();

        initializeTOCFeatures();

        preventMultiTouchGestures();

        setExternalLinksToOpenInNewTab();
    });

    function updateHHangableBehavior() {
        var sidenoteHangables = mainElement.querySelectorAll('.sidenote-number + h-hangable');
        sidenoteHangables.forEach(function (hHangable) {
            var sidenoteNumber = hHangable.previousElementSibling;
            var sidenoteBox = sidenoteNumber.querySelector('.sidenote-box');
            if (sidenoteBox) {
                sidenoteNumber.insertBefore(hHangable, sidenoteBox);
            }
        });
    }

    function initializeMutationObserver() {
        var observer = new MutationObserver(function (mutations) {
            var shouldUpdate = false;
            mutations.forEach(function (mutation) {
                mutation.addedNodes.forEach(function (node) {
                    if (node.nodeType === 1 && node.matches('h-hangable')) {
                        var previousSibling = node.previousElementSibling;
                        if (previousSibling && previousSibling.matches('.sidenote-number')) {
                            shouldUpdate = true;
                        }
                    }
                });
            });
            if (shouldUpdate) {
                setTimeout(updateHHangableBehavior, 1200);
            }
        });

        var config = { childList: true, subtree: true };
        if (mainElement) {
            observer.observe(mainElement, config);
        }
    }

    function applyBreakAllClass() {
        var screenWidth = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;
        var codeElements = mainElement.querySelectorAll('code');

        codeElements.forEach(function (element) {
            if (screenWidth <= 960) {
                if (element.textContent.length > 10) {
                    element.classList.add('break-all');
                }
            }
            else {
                if (element.textContent.length > 30) {
                    element.classList.add('break-all');
                }
            }
        });
    }

    function handleScrollEvents() {
        if (contentHeader) {
            let lastScrollTop = 0;
            let isScrolling = false;
            const addnDiv = contentHeader.querySelector('.addn');
            const topScrollBar = contentHeader.querySelector('.top-scroll-bar');

            window.addEventListener('scroll', function () {
                const currentScroll = window.pageYOffset || document.documentElement.scrollTop;
                if (!isScrolling) {
                    window.requestAnimationFrame(function () {
                        if (topScrollBar) {
                            const scrollPercent = (currentScroll / (document.documentElement.scrollHeight - window.innerHeight)) * 100;
                            topScrollBar.style.width = scrollPercent + '%';
                            topScrollBar.style.display = 'block';
                        }
                        if (addnDiv) {
                            if (currentScroll > lastScrollTop && currentScroll > 50) {
                                addnDiv.classList.remove('visible');
                            } else {
                                addnDiv.classList.add('visible');
                            }
                        }
                        lastScrollTop = currentScroll <= 0 ? 0 : currentScroll;
                        isScrolling = false;
                    });
                    isScrolling = true;
                }
                if (window.innerWidth >= 1600) {
                    toggleTOCOnScroll();
                }
            }, false);
        }
    }

    function showHypo() {
        var existingScript = document.getElementById('hypothes-script');
        var button = contentHeader.querySelector('#show-hypo');

        var commentHypo = document.getElementById("commenthypo");

        if (!existingScript) {
            button.textContent = 'Loading';
            commentHypo.textContent = 'Loading'

            var script = document.createElement('script');
            script.id = 'hypothes-script';
            script.src = 'https://hypothes.is/embed.js';

            script.onload = () => {
                button.textContent = 'Hypothes.is';
                commentHypo.textContent = 'You can now select texts to highlight or note.'
            };

            script.onerror = () => {
                button.style.color = 'red';
                button.textContent = 'Failed';
                commentHypo.textContent = 'Network error. Please refresh and try again.'
            };

            
            document.body.appendChild(script);
        } else {
            toggleHypothesisElementsVisibility();
            button.style.color = 'var(--text-color)';
        }
    }

    function toggleHypothesisElementsVisibility() {
        const elementsToToggle = [
            'hypothesis-sidebar',
            'hypothesis-notebook',
            'hypothesis-profile',
            'hypothesis-adder',
            'hypothesis-highlight-cluster-toolbar'
        ];

        elementsToToggle.forEach(function (element) {
            var el = document.querySelector(element);
            if (el) {
                if (el.style.display === 'none') {
                    el.style.display = '';
                } else {
                    el.style.display = 'none';
                }
            }
        });
    }


    function initializeTOCFeatures() {
        if (contentHeader) {
            const contentsFixedDiv = contentHeader.querySelector('#contents-fixed');
            const tocContainer = contentHeader.querySelector('#contents-toc');
            if (contentsFixedDiv && headers.length > 1) {
                contentsFixedDiv.style.display = 'flex';
                contentsFixedDiv.addEventListener('click', (event) => {
                    toggleTOC();
                    event.stopPropagation();
                });
            }
            if (tocContainer && !tocContainer.dataset.initialized) {
                const throttledHighlight = throttle(highlightAppropriateHeader, 250);
                window.addEventListener('scroll', throttledHighlight);
                tocContainer.dataset.initialized = 'true';
            }
        }
    }

    function highlightAppropriateHeader() {
        let highlightedHeader = null;
        let foundHeaderInView = false;

        
        for (let i = 0; i < headers.length; i++) {
            const header = headers[i];
            const bounding = header.getBoundingClientRect();

            if (bounding.top >= 0 && bounding.bottom <= window.innerHeight) {
                highlightedHeader = header; 
                foundHeaderInView = true;
                break;
            }
        }

        
        if (!foundHeaderInView) {
            for (let i = 0; i < headers.length; i++) {
                const header = headers[i];
                let nextHeader = headers[i + 1];
                let endOfSection = nextHeader ? nextHeader.getBoundingClientRect().top : Infinity;

                const startOfSection = header.getBoundingClientRect().bottom;

                if (startOfSection < window.innerHeight && endOfSection > 0) {
                    highlightedHeader = header;
                    break;
                }
            }
        }

        
        contentHeader.querySelectorAll('nav#TableOfContents a').forEach(link => {
            link.classList.remove('toc-highlight');
        });

        
        if (highlightedHeader) {
            const link = contentHeader.querySelector(`nav#TableOfContents a[href="#${highlightedHeader.id}"]`);
            if (link) {
                link.classList.add('toc-highlight');
            }
        }
    }

    function toggleTOC() {
        const tocContainer = contentHeader.querySelector('#contents-toc');
        const isDisplayed = window.getComputedStyle(tocContainer).display !== 'none';
        tocContainer.style.display = isDisplayed ? 'none' : 'flex';
    }

    function toggleTOCOnScroll() {
        const tocContainer = document.querySelector('#TableOfContents');
        const footerNav = document.querySelector('.footer-nav');

        if (!tocContainer || !footerNav) return;

        const footerNavTop = footerNav.getBoundingClientRect().top;
        const windowHeight = window.innerHeight;

        
        if (footerNavTop <= windowHeight) {
            tocContainer.style.display = 'none';
        } else {
            tocContainer.style.display = 'flex';
        }
    }

    function throttle(func, limit) {
        let lastFunc;
        let lastRan;
        return function () {
            const context = this;
            const args = arguments;
            if (!lastRan) {
                func.apply(context, args);
                lastRan = Date.now();
            } else {
                clearTimeout(lastFunc);
                lastFunc = setTimeout(function () {
                    if ((Date.now() - lastRan) >= limit) {
                        func.apply(context, args);
                        lastRan = Date.now();
                    }
                }, limit - (Date.now() - lastRan));
            }
        }
    }

    function setExternalLinksToOpenInNewTab() {
        const links = document.querySelectorAll('.e-content a[href*="//"]:not(.stream-url):not(.stream-time)');
        const linkDisplay = document.querySelector('.link-display');

        links.forEach(function (link) {
            link.setAttribute('target', '_blank');

            link.addEventListener('mouseover', function () {
                const url = new URL(this.href);
                const rootDomain = url.hostname.replace(/^www\./, '');
                const boldDomain = `<span class="bold-domain">${rootDomain}</span>`;
                const displayUrl = this.href.replace(rootDomain, boldDomain);

                linkDisplay.innerHTML = displayUrl;
                linkDisplay.style.display = 'block';
                const linkRect = this.getBoundingClientRect();
                linkDisplay.style.top = `${linkRect.bottom + window.scrollY}px`;
                linkDisplay.style.left = `${linkRect.left + window.scrollX}px`;
            });

            link.addEventListener('mouseout', function () {
                linkDisplay.style.display = 'none';
            });
        });
    }

    function setupSidenotes() {
        if (mainElement.querySelectorAll('.sidenote-number').length >= 3 && window.innerWidth >= 1000) {
            const sidenoteLine = mainElement.querySelectorAll('.sidenote-line');

            sidenoteLine.forEach(element => {
                element.style.border = 'none';
            });

            var jQueryScript = document.createElement('script');
            jQueryScript.src = '/jquery-3.6.0.min.js';
            document.head.appendChild(jQueryScript);

            jQueryScript.onload = function () {
                var jsPlumbScript = document.createElement('script');
                jsPlumbScript.src = '/jsplumb.min.js';
                document.head.appendChild(jsPlumbScript);

                jsPlumbScript.onload = function () {
                    initJsPlumb();
                };
            };
        }
    }

    function initJsPlumb() {
        var jsPlumbCSS = document.createElement('link');
        jsPlumbCSS.href = '/jsplumbtoolkit-defaults.min.css';
        jsPlumbCSS.rel = 'stylesheet';
        document.head.appendChild(jsPlumbCSS);

        jQuery(document).ready(function () {
            jsPlumb.importDefaults({
                ConnectionsDetachable: false,
                ReattachConnections: false,
                Endpoint: "Blank",
                Connector: ["Straight"],
                PaintStyle: { stroke: "var(--text-color)", strokeWidth: 1 }
            });

            createConnections();
            var resizeObserver = new ResizeObserver(function () {
                createConnections();
            });
            resizeObserver.observe(document.body);
        });
    }

    function createConnections() {
        jsPlumb.deleteEveryEndpoint();
        jQuery('.sidenote-number').each(function () {
            var sidenoteNumber = jQuery(this);
            var sidenote = sidenoteNumber.find('.sidenote');

            if (sidenote.length) {
                jsPlumb.connect({
                    source: sidenoteNumber[0],
                    target: sidenote[0],
                    anchors: ["Center", "RightMiddle"],
                    cssClass: "jsplumb-line"
                });
            }
        });
    }


    function preventMultiTouchGestures() {
        window.onload = function () {
            document.addEventListener('touchstart', function (event) {
                if (event.touches.length > 1) {
                    event.preventDefault();
                }
            }, false);
            var lastTouchEnd = 0;
            document.addEventListener('touchend', function (event) {
                var now = (new Date()).getTime();
                if (now - lastTouchEnd <= 300) {
                    event.preventDefault();
                }
                lastTouchEnd = now;
            }, false);
            document.addEventListener('gesturestart', function (event) {
                event.preventDefault();
            }, false);
        }
    }
</script>

</html>